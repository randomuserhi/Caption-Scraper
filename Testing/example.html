<!DOCTYPE html>
<html>
	<head>
		<script type="text/x-rhu-config">
		RHU.config = {
			modules: ["rest"]
		};
		</script>
		<script src="RHU/RHU.js"></script>
	</head>
	<body>
		<script type="text/javascript">
			/*
			curl https://api.openai.com/v1/models \
			  -H "Authorization: Bearer $OPENAI_API_KEY" \
			  -H "OpenAI-Organization: org-ST1hxKU2EUD2ISgf8Yds4yFt"
			 */
			RHU.module({ hard: ["RHU.Rest"], trace: new Error() }, function(e) {
				let request = RHU.Rest.fetch(
					{
						url: `https://api.openai.com/v1/models`,
						fetch: { 
							method: "GET",
							headers: {
								"Authorization": "Bearer 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",
								"OpenAI-Organization": "org-3y7cOPT6W2m8ZuVUouJvfyUR"
							},
						},
						parser: function() {
						    return {
						    	/*urlParams: {
						    	},*/
						    	/*body: {
							    }*/
						    }
						},
						callback: async function(resp)
						{
							if (resp.status == 200)
							{
								let json = await resp.json();
					            return json;
							}
							else 
							{
								return null;
							}
						}
					});

				(async function() {
					console.log(await request());
				})();
			});

			/*
			curl https://api.openai.com/v1/chat/completions \
			  -H "Content-Type: application/json" \
			  -H "Authorization: Bearer $OPENAI_API_KEY" \
			  -d '{
			     "model": "gpt-3.5-turbo",
			     "messages": [{"role": "user", "content": "Say this is a test!"}],
			     "temperature": 0.7
			   }'
			 */
			RHU.module({ hard: ["RHU.Rest"], trace: new Error() }, function(e) {
				let request = RHU.Rest.fetchJSON(
					{
						url: `https://api.openai.com/v1/chat/completions`,
						fetch: { 
							method: "POST",
							headers: {
								"Authorization": "Bearer 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",
								"OpenAI-Organization": "org-3y7cOPT6W2m8ZuVUouJvfyUR"
							},
						},
						parser: function() {
						    return {
						    	body: {
									"model": "gpt-3.5-turbo",
									"messages": [{"role": "user", "content": "Say this is a test!"}],
									"temperature": 0.7
								}
						    }
						},
						callback: async function(resp)
						{
							if (resp.status == 200)
							{
								let json = await resp.json();
					            return json;
							}
							else 
							{
								return null;
							}
						}
					});

				(async function() {
					console.log(await request());
				})();
			});
		</script>
	</body>
</html>